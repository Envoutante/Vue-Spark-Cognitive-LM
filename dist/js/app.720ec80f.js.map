{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/RightItem.vue?305e","webpack:///./src/api/ApiChat.js","webpack:///./src/App.vue?219c","webpack:///./src/components/Chat.vue?5483","webpack:///./src/components/LeftItem.vue?3aa9","webpack:///src/components/LeftItem.vue","webpack:///./src/components/LeftItem.vue?7031","webpack:///./src/components/LeftItem.vue","webpack:///./src/components/RightItem.vue?642c","webpack:///src/components/RightItem.vue","webpack:///./src/components/RightItem.vue?83e6","webpack:///./src/components/RightItem.vue","webpack:///./src/api/base/request.js","webpack:///src/components/Chat.vue","webpack:///./src/components/Chat.vue?ead0","webpack:///./src/components/Chat.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/assets/doctor.png","webpack:///./src/components/Chat.vue?c491","webpack:///./src/ui/index.js","webpack:///./src/components/LeftItem.vue?7dde"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","modelDomain","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","ref","_l","item","index","id","type","content","directives","rawName","staticStyle","on","$event","indexOf","_k","keyCode","send","model","callback","$$v","text","expression","_v","httpUrl","URL","APPID","API_SECRET","API_KEY","question_text","total_res","getWebsocketUrl","pathname","Promise","resolve","apiKey","apiSecret","url","host","location","date","Date","toGMTString","algorithm","headers","signatureOrigin","signatureSha","CryptoJS","HmacSHA256","signature","enc","Base64","stringify","authorizationOrigin","authorization","btoa","TTSRecorder","appId","status","onWillStatusChange","connectWebSocket","finally","console","log","setStatus","then","ttsWS","WebSocket","alert","onopen","webSocketSend","onmessage","e","onerror","clearTimeout","playTimeout","error","encodeURI","replace","onclose","params","header","app_id","uid","parameter","chat","domain","temperature","max_tokens","payload","message","role","JSON","resultData","jsonData","parse","choices","code","close","bigModel","getChatResponse","start","_s","resText","preview","_e","props","components","created","printText","methods","component","request","axios","timeout","interceptors","use","config","reject","response","res","ret","Error","msg","inserted","el","scrollIntoView","msglist","me","getResponse","saveQA","method","userId","getQueryString","question","answer","time","href","query","substr","vars","split","pair","variable","Chat","require","Vue","productionTip","VueAxios","defaults","baseURL","dayjs","format","$","render","h","App","$mount","Vant","Lazyload"],"mappings":"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","file":"js/app.720ec80f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RightItem.vue?vue&type=style&index=0&id=162bad16&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RightItem.vue?vue&type=style&index=0&id=162bad16&scoped=true&lang=scss&\"","// import request from '@/api/base/request'\nimport CryptoJS from 'crypto-js'\n\n// 接口地址\nlet httpUrl = new URL('wss://spark-api.xf-yun.com/v1.1/chat')\nlet modelDomain\n\n// 个人的应用信息\nconst APPID = '8373bf37'\nconst API_SECRET = 'OTNiOTllMWI3Y2Y4YmZmNWI4MzY3ZTRi'\nconst API_KEY = '6f8dc8141b2304e336f94f7ef0f7f8d1'\n\n// 用于存放模型的答案\nvar question_text = ''\nvar total_res = ''\n\n// 拼接请求地址\nfunction getWebsocketUrl() {\n  // 解析httpUrl以动态获取domain信息\n  switch (httpUrl.pathname) {\n    case '/v1.1/chat':\n      modelDomain = 'general'\n      break\n    case '/v2.1/chat':\n      modelDomain = 'generalv2'\n      break\n    case '/v3.1/chat':\n      modelDomain = 'generalv3'\n      break\n    case '/v3.5/chat':\n      modelDomain = 'generalv3.5'\n      break\n  }\n\n  return new Promise((resolve) => {\n    // 拼接各种信息以完成接口鉴权\n    var apiKey = API_KEY\n    var apiSecret = API_SECRET\n\n    var url = 'wss://' + httpUrl.host + httpUrl.pathname\n\n    var host = location.host\n    var date = new Date().toGMTString()\n    var algorithm = 'hmac-sha256'\n    var headers = 'host date request-line'\n    var signatureOrigin = `host: ${host}\\ndate: ${date}\\nGET ${httpUrl.pathname} HTTP/1.1`\n    var signatureSha = CryptoJS.HmacSHA256(signatureOrigin, apiSecret)\n    var signature = CryptoJS.enc.Base64.stringify(signatureSha)\n    var authorizationOrigin = `api_key=\"${apiKey}\", algorithm=\"${algorithm}\", headers=\"${headers}\", signature=\"${signature}\"`\n    var authorization = btoa(authorizationOrigin)\n\n    // 拼接为url\n    url = `${url}?authorization=${authorization}&date=${date}&host=${host}`\n    resolve(url)\n  })\n}\n\nclass TTSRecorder {\n  constructor({ appId = APPID } = {}) {\n    this.appId = appId\n    this.status = 'init'\n  }\n\n  // 修改状态\n  setStatus(status) {\n    this.onWillStatusChange && this.onWillStatusChange(this.status, status)\n    this.status = status\n  }\n\n  start() {\n    total_res = '' // 请空回答历史\n    return this.connectWebSocket().finally(() => {\n      console.log('start函数执行完毕')\n    })\n  }\n\n  // 连接websocket\n  connectWebSocket() {\n    return new Promise((resolve) => {\n      this.setStatus('ttsing')\n      return getWebsocketUrl().then((url) => {\n        let ttsWS\n        if ('WebSocket' in window) {\n          ttsWS = new WebSocket(url)\n        } else if ('MozWebSocket' in window) {\n          // ttsWS = new MozWebSocket(url)\n        } else {\n          alert('浏览器不支持WebSocket')\n          return\n        }\n\n        this.ttsWS = ttsWS\n        ttsWS.onopen = () => {\n          this.webSocketSend()\n        }\n\n        ttsWS.onmessage = (e) => {\n          this.result(e.data).then(() => {\n            resolve()\n          })\n        }\n\n        ttsWS.onerror = () => {\n          clearTimeout(this.playTimeout)\n          this.setStatus('error')\n          alert('WebSocket报错，请f12查看详情')\n          console.error(`详情查看：${encodeURI(url.replace('wss:', 'https:'))}`)\n        }\n\n        ttsWS.onclose = (e) => {\n          console.log(e)\n        }\n      })\n    })\n  }\n\n  // websocket发送数据\n  webSocketSend() {\n    console.log(modelDomain)\n    var params = {\n      header: {\n        app_id: this.appId,\n        uid: 'fd3f47e4-d',\n      },\n\n      parameter: {\n        chat: {\n          domain: modelDomain,\n          temperature: 0.5,\n          max_tokens: 1024,\n        },\n      },\n\n      payload: {\n        message: {\n          text: [\n            {\n              role: 'user',\n              content: question_text,\n            },\n          ],\n        },\n      },\n    }\n    console.log(JSON.stringify(params))\n    this.ttsWS.send(JSON.stringify(params))\n  }\n\n  // websocket接收数据的处理\n  result(resultData) {\n    return new Promise((resolve) => {\n      let jsonData = JSON.parse(resultData)\n      total_res += jsonData.payload.choices.text[0].content\n      if (jsonData.payload.choices.status === 2) {\n        console.log('回答：' + total_res)\n        resolve(total_res)\n      }\n\n      // 提问失败\n      if (jsonData.header.code !== 0) {\n        alert(`提问失败: ${jsonData.header.code}:${jsonData.header.message}`)\n        console.error(`${jsonData.header.code}:${jsonData.header.message}`)\n        return\n      }\n\n      if (jsonData.header.code === 0 && jsonData.header.status === 2) {\n        this.ttsWS.close()\n        bigModel.setStatus('init')\n      }\n    })\n  }\n}\n\nlet bigModel = new TTSRecorder()\nexport function getChatResponse(text) {\n  return new Promise((resolve) => {\n    question_text = text\n    total_res = '' // 请空历史回答\n    bigModel.start().then(() => {\n      console.log('start()方法执行完毕')\n      console.log('返回值：' + total_res)\n      resolve(total_res)\n    })\n  })\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Chat')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{ref:\"list\",staticClass:\"list\",attrs:{\"id\":\"list\"}},[_c('ul',_vm._l((_vm.msglist),function(item,index){return _c('li',{key:index},[(item.me)?_c('RightItem',{attrs:{\"id\":item.id,\"type\":item.type,\"content\":item.content}}):_c('LeftItem',{attrs:{\"id\":item.id,\"type\":item.type,\"content\":item.content}}),_c('div',{directives:[{name:\"scroll\",rawName:\"v-scroll\"}],staticStyle:{\"height\":\"0\"}})],1)}),0)]),_c('div',{staticClass:\"bottom\"},[_c('div',{staticClass:\"line\"}),_c('div',{staticClass:\"input-send\"},[_c('van-field',{staticClass:\"input\",attrs:{\"placeholder\":\"请输入提问内容...\",\"type\":\"textarea\",\"rows\":\"1\",\"autosize\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.send($event)}},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}),_c('van-button',{staticClass:\"send\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.send}},[_vm._v(\"发送\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('img',{staticClass:\"head\",attrs:{\"src\":require(\"@/assets/doctor.png\")}}),_c('div',{staticClass:\"content\"},[(_vm.type === 1)?_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(_vm.resText)+\" \")]):(_vm.type === 2)?_c('img',{staticClass:\"img\",attrs:{\"src\":_vm.content},on:{\"click\":function($event){return _vm.preview(_vm.content)}}}):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <img class=\"head\" src=\"@/assets/doctor.png\" />\n\n    <div class=\"content\">\n      <div class=\"text\" v-if=\"type === 1\">\n        <!-- <vue-markdown :source=\"resText\" /> -->\n        {{ resText }}\n      </div>\n\n      <img\n        class=\"img\"\n        :src=\"content\"\n        v-else-if=\"type === 2\"\n        @click=\"preview(content)\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport ImagePreview from 'vant/lib/image-preview'\nimport VueMarkdown from 'vue-markdown'\n\nexport default {\n  name: 'LeftItem',\n  props: ['id', 'type', 'content'],\n\n  components: {\n    'vue-markdown': VueMarkdown,\n  },\n\n  data() {\n    return {\n      resText: '',\n    }\n  },\n\n  created() {\n    this.printText()\n  },\n\n  methods: {\n    async printText() {\n      const data = this.content\n      let text = ''\n      for (let i = 0; i < data.length; i++) {\n        text += data.charAt(i)\n        await new Promise((resolve) => {\n          setTimeout(resolve, 50)\n        })\n        this.resText = text\n      }\n    },\n\n    preview(url) {\n      ImagePreview([url])\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.container {\n  display: flex;\n  padding: 10px 15px;\n  margin-right: 60px;\n\n  .head {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    border: 1px solid #eee;\n    box-shadow: 0 1px 5px 0 #2c5845;\n  }\n\n  .content {\n    margin-left: 10px;\n    margin-top: 10px;\n\n    .text {\n      background-color: #438584;\n      border-radius: 10px;\n      padding: 5px;\n      font-size: 16px;\n      color: #fff;\n      // line-height: 0;\n    }\n\n    .img {\n      width: 100px;\n      border-bottom-right-radius: 10px;\n      border-top-right-radius: 10px;\n      border-bottom-left-radius: 10px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeftItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeftItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LeftItem.vue?vue&type=template&id=257539a2&scoped=true&\"\nimport script from \"./LeftItem.vue?vue&type=script&lang=js&\"\nexport * from \"./LeftItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LeftItem.vue?vue&type=style&index=0&id=257539a2&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"257539a2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"content\"},[(_vm.type === 1)?_c('div',{staticClass:\"text\",staticStyle:{\"word-break\":\"break-all\"}},[_vm._v(\" \"+_vm._s(_vm.content)+\" \")]):(_vm.type === 2)?_c('img',{staticClass:\"img\",attrs:{\"src\":_vm.content}}):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <!-- <img\n      class=\"head\"\n      src=\"https://dss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1068485212,3292662520&fm=111&gp=0.jpg\"\n    /> -->\n    <div class=\"content\">\n      <div class=\"text\" v-if=\"type === 1\" style=\"word-break: break-all;\">\n        {{ content }}\n      </div>\n\n      <img class=\"img\" :src=\"content\" v-else-if=\"type === 2\" />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'RightItem',\n  props: ['id', 'type', 'content'],\n}\n</script>\n\n<style scoped lang=\"scss\">\n.container {\n  display: flex;\n  padding: 10px 15px;\n  margin-left: 60px;\n  flex-direction: row-reverse;\n\n  .head {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    border: 1px solid #eee;\n  }\n\n  .content {\n    margin-right: 10px;\n    margin-top: 10px;\n\n    .text {\n      background-color: #f5f6f8;\n      border-radius: 10px;\n      padding: 5px;\n      font-size: 16px;\n      color: #606266;\n    }\n\n    .img {\n      width: 100px;\n      border-bottom-right-radius: 10px;\n      border-top-right-radius: 10px;\n      border-bottom-left-radius: 10px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RightItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RightItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RightItem.vue?vue&type=template&id=162bad16&scoped=true&\"\nimport script from \"./RightItem.vue?vue&type=script&lang=js&\"\nexport * from \"./RightItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RightItem.vue?vue&type=style&index=0&id=162bad16&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"162bad16\",\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios'\n\nconst request = axios.create({\n  // baseURL: '/api',\n  timeout: 8000,\n})\n\n// request interceptor\nrequest.interceptors.request.use(\n  (config) => {\n    console.log('终端打印：' + JSON.stringify(config))\n    config.url = 'https://cn-cd-dx-tmp7.natfrp.cloud:28319' + config.url\n\n    return config\n  },\n\n  (error) => {\n    console.log('终端报错：' + error) // for debug\n    return Promise.reject(error)\n  }\n)\n\n// response interceptor\nrequest.interceptors.response.use(\n  (response) => {\n    console.log(response.data)\n    const res = response.data\n    console.log(res.ret)\n    if (res.ret !== 0) {\n      return Promise.reject(new Error(res.msg || 'Error'))\n    } else {\n      return res\n    }\n  },\n\n  (error) => {\n    console.log('终端报错：' + error)\n    return Promise.reject(error)\n  }\n)\n\nexport default request\n","<template>\n  <div class=\"container\">\n    <div class=\"list\" id=\"list\" ref=\"list\">\n      <ul>\n        <li v-for=\"(item, index) in msglist\" :key=\"index\">\n          <RightItem\n            :id=\"item.id\"\n            :type=\"item.type\"\n            :content=\"item.content\"\n            v-if=\"item.me\"\n          ></RightItem>\n\n          <LeftItem\n            :id=\"item.id\"\n            :type=\"item.type\"\n            :content=\"item.content\"\n            v-else\n          ></LeftItem>\n          <div v-scroll style=\"height: 0\"></div>\n        </li>\n      </ul>\n    </div>\n\n    <div class=\"bottom\">\n      <div class=\"line\"></div>\n      <div class=\"input-send\">\n        <van-field\n          v-model=\"text\"\n          placeholder=\"请输入提问内容...\"\n          class=\"input\"\n          @keyup.enter=\"send\"\n          type=\"textarea\"\n          rows=\"1\"\n          autosize\n        />\n        <van-button type=\"primary\" class=\"send\" @click=\"send\">发送</van-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport { getChatResponse } from '@/api/ApiChat'\nimport LeftItem from '@/components/LeftItem'\nimport RightItem from '@/components/RightItem'\nimport dayjs from 'dayjs'\nimport request from '@/api/base/request'\n\nVue.directive('scroll', {\n  inserted(el) {\n    el.scrollIntoView()\n  },\n})\n\nexport default {\n  name: 'Chat',\n  components: { LeftItem, RightItem },\n\n  data: () => {\n    return {\n      text: '',\n      msglist: [\n        {\n          id: 1,\n          type: 1,\n          content: '欢迎使用智能医生助手！请问有什么可以帮助您的吗😊？',\n          me: false,\n        },\n      ],\n    }\n  },\n\n  methods: {\n    // 提交问题\n    send() {\n      if (this.text) {\n        this.msglist.push({\n          id: this.msglist[this.msglist.length - 1].id + 1,\n          type: 1,\n          content: this.text,\n          me: true,\n        })\n\n        if (this.text === '图片') {\n          this.msglist.push({\n            id: this.msglist[this.msglist.length - 1].id + 1,\n            type: 2,\n            content: 'http://6emm.hxzdhn.com/img/2020/06/28/jausoellbtf.jpg',\n            me: false,\n          })\n        } else {\n          this.getResponse(this.text)\n        }\n        this.text = ''\n      }\n    },\n\n    // 获取GPT答案\n    getResponse(text) {\n      this.msglist.push({\n        id: this.msglist[this.msglist.length - 1].id + 1,\n        type: 1,\n        content: '请稍等片刻😊，我需要一点思考时间...',\n        me: false,\n      })\n\n      getChatResponse(text).then((res) => {\n        console.log('打印' + res)\n        this.saveQA(text, res)\n        this.msglist.push({\n          id: this.msglist[this.msglist.length - 1].id + 1,\n          type: 1,\n          content: res,\n          me: false,\n        })\n      })\n    },\n\n    // 后端保存问题和回复\n    saveQA(question, answer) {\n      let currentDate = new Date()\n      let date = dayjs(currentDate).format('YYYY-MM-DD')\n      let time = dayjs(currentDate).format('HH:mm:ss')\n\n      // userId: this.getQueryString('userId'),\n      request({\n        url: '/receive_answer',\n        method: 'post',\n        data: {\n          userId: this.getQueryString('userId'),\n          question: question,\n          answer: answer,\n          date: date,\n          time: time,\n        },\n      })\n    },\n\n    // 获取地址栏参数\n    getQueryString(variable) {\n      var index = window.location.href.indexOf('?') // 获取地址栏路径并进行分割\n      var query = window.location.href.substr(\n        index + 1,\n        window.location.href.length\n      )\n      var vars = query.split('&')\n      for (var i = 0; i < vars.length; i++) {\n        var pair = vars[i].split('=')\n        if (pair[0] == variable) {\n          return pair[1]\n        }\n      }\n      return false // 如果没有参数就返回false值，就不会出现上边报错的情况了\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.container {\n  ul {\n    padding: 0;\n    margin: 0;\n  }\n\n  li {\n    list-style: none;\n  }\n\n  .list {\n    width: 100%;\n    height: 100%;\n    margin-bottom: 45px;\n  }\n\n  .bottom {\n    width: 100%;\n    position: fixed;\n    bottom: 0;\n\n    .line {\n      width: 100%;\n      height: 1px;\n      background-color: #ddd;\n    }\n\n    .input-send {\n      display: flex;\n      justify-content: space-between;\n      background-color: #fff;\n      padding-bottom: 15px;\n\n      .input {\n        padding-right: 10px;\n        font-size: 16px;\n      }\n\n      .send {\n        width: 80px;\n        height: 30px;\n        margin-top: 7px;\n        margin-right: 10px;\n        margin-left: 5px;\n        border-radius: 10px;\n        font-size: 16px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=f3ff9190&scoped=true&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&id=f3ff9190&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f3ff9190\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <Chat></Chat>\n  </div>\n</template>\n\n<script>\nimport Chat from './components/Chat.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Chat,\n  },\n}\n</script>\n\n<style scoped></style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2b4406ae&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b4406ae\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport $ from 'jquery'\n\nrequire('@/ui/index')\n\nVue.config.productionTip = false\n\n// 使用axios\nimport axios from 'axios'\nimport VueAxios from 'vue-axios'\nVue.use(VueAxios, axios)\naxios.defaults.baseURL = '/api'\n\n// 使用dayjs\nimport dayjs from 'dayjs'\ndayjs().format()\n\nnew Vue({\n  $, // 添加该行即可\n  render: (h) => h(App),\n}).$mount('#app')\n","module.exports = __webpack_public_path__ + \"img/doctor.df67b946.png\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=f3ff9190&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=f3ff9190&scoped=true&lang=scss&\"","import Vue from 'vue'\nimport Vant from 'vant'\nimport 'vant/lib/index.css'\n\nVue.use(Vant)\n\nimport { Lazyload } from 'vant'\n\nVue.use(Lazyload)\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeftItem.vue?vue&type=style&index=0&id=257539a2&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeftItem.vue?vue&type=style&index=0&id=257539a2&scoped=true&lang=scss&\""],"sourceRoot":""}